:root{
    --sidebar-width: 300px;
    --bg: #0f1724;
    --panel: #0b1220;
    --muted: #9aa4b2;
    --accent: #4f46e5;
    --my-msg: #1f6feb;
    --their-msg: #2a2f36;
    --text: #e6eef6;
    --radius: 12px;
    --max-width: 900px;
    --mobile-break: 720px;
}

*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Arial,sans-serif;background:var(--bg);color:var(--text);}

.chat-app{
    display:grid;
    grid-template-columns: var(--sidebar-width) 1fr;
    height:100vh;
    gap:var(--gap);
    align-items:stretch;
    padding:12px;
}

/* Sidebar */
.sidebar{
    background:linear-gradient(180deg,var(--panel),#071020);
    border-radius:12px;
    padding:12px;
    display:flex;
    flex-direction:column;
    min-width:0;
    overflow:hidden;
}
.sidebar-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
.brand{font-size:1.1rem;margin:0}
.search input{width:100%;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:var(--text)}
.conversations{list-style:none;padding:8px 0;margin:0;overflow:auto}

/* conversation item */
.conversations li{
    display:flex;align-items:center;gap:10px;padding:8px;border-radius:8px;cursor:pointer;
}
.conversations li.active{background:rgba(255,255,255,0.03)}
.conversations img.avatar{width:40px;height:40px;border-radius:50%;object-fit:cover}
.conv-meta{flex:1;min-width:0}
.conv-meta .name{font-weight:600}
.conv-meta .last{font-size:0.85rem;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

/* Chat column */
.chat{
    background:linear-gradient(180deg,#071427,#071220);
    border-radius:12px;
    display:flex;
    flex-direction:column;
    overflow:hidden;
    min-width:0;
}
.chat-header{display:flex;align-items:center;padding:12px;border-bottom:1px solid rgba(255,255,255,0.03)}
.chat-title{display:flex;gap:12px;align-items:center}
.chat-title .avatar{width:44px;height:44px;border-radius:50%;object-fit:cover}
.chat-title .name{font-weight:700}
.chat-title .sub{font-size:0.85rem;color:var(--muted)}

/* Messages list */
.messages {
    flex:1;
    padding:16px;
    overflow:auto;
    display:flex;
    flex-direction:column;
    gap:8px;
    scroll-behavior:smooth;
}
.messages {
    -ms-overflow-style: auto;
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.16) transparent;
}
.messages::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}
.messages::-webkit-scrollbar-track {
    background: transparent;
}
.messages::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.12);
    border-radius: 8px;
    border: 2px solid transparent;
    background-clip: padding-box;
    transition: background-color 120ms ease;
}
.messages:hover::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.18);
}

.messages:hover {
    scrollbar-color: rgba(255, 255, 255, 0.18) transparent;
}

/* Message bubbles */
.msg{max-width:70%;padding:10px 12px;border-radius:12px;line-height:1.2}
.msg.me{margin-left:auto;background:var(--my-msg);border-bottom-right-radius:4px;color:white}
.msg.them{background:var(--their-msg);border-bottom-left-radius:4px;color:var(--text)}
.msg .time{display:block;font-size:0.75rem;color:rgba(255,255,255,0.6);margin-top:6px}

/* Composer */
.composer{display:flex;padding:12px;border-top:1px solid rgba(255,255,255,0.03)}
.composer input{flex:1;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--text);margin-right:8px}
.composer button{padding:10px 14px;border-radius:10px;background:var(--accent);border:none;color:white;cursor:pointer}

/* Responsive */
@media (max-width: 720px){
    .chat-app{grid-template-columns:1fr;padding:0}
    .sidebar{position:fixed;left:0;top:0;bottom:0;width:80%;max-width:320px;z-index:30;transform:translateX(-120%);transition:transform .22s ease;box-shadow:0 6px 18px rgba(0,0,0,0.5)}
    .sidebar.open{transform:translateX(0)}
    .back-btn{display:inline-block;margin-right:8px}
}
@media (min-width: 721px){
    .back-btn{display:none}
}

/* Date separator */
.date-sep {
    margin: 12px auto;
    display: block;
    padding: 6px 12px;
    background: rgba(255, 255, 255, 0.03);
    color: #bfc8d6;
    border-radius: 999px;
    font-size: 13px;
    text-align: center;
}