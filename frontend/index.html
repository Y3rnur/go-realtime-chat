<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset = "UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Go Realtime Chat</title>
        <link rel="stylesheet" href="style.css">
        <script defer src="script.js"></script>
    </head>
    <body>
        <div class="chat-app" id="app">
            <aside class="sidebar" id="sidebar" aria-label="Conversations">
                <!-- Auth UI -->
                <div id="auth-ui" class="auth-ui" aria-hidden="false">
                    <div id="auth-form" class="auth-form">
                        <input id="auth-email" class="auth-input" type="email" placeholder="Email" />
                        <input id="auth-pw" class="auth-input" type="password" placeholder="Password" />
                        <button id="auth-login" class="auth-btn">Login</button>
                    </div>
                    <div id="auth-info" class="auth-info" style="display:none;">
                        <span id="auth-name" class="auth-name"></span>
                        <button id="auth-logout" class="auth-btn auth-logout">Logout</button>
                    </div>
                </div>
                <header class="sidebar-header">
                    <h1 class="brand">MyChat</h1>
                    <button id="new-conv" title="New conversation">+</button>
                </header>

                <div class="search">
                    <input id="search" type="search" placeholder="Search or start new..." aria-label="Search conversations"/>
                </div>

                <ul class="conversations" id="conversations" role="list">
                    <!-- conversation items should be inserted here -->
                </ul>
            </aside>

            <main class="chat" id="chat" aria-live="polite">
                <header class="chat-header">
                    <button id="back-btn" class="back-btn" aria-hidden="true">‹</button>
                    <div class="chat-title">
                        <img class="avatar" src="" alt="" id="chat-avatar" />
                        <div>
                            <div id="chat-name" class="name">Select a conversation</div>
                            <div id="chat-sub" class="sub">—</div>
                        </div>
                    </div>
                </header>

                <section class="messages" id="messages" role="log" aria-live="polite">
                    <!-- messages are rendered here -->
                </section>

                <form id="composer" class="composer" aria-label="Message composer">
                    <input id="input-msg" type="text" placeholder="Type a message" autocomplete="off" aria-label="Type a message" />
                    <button id="send" type="submit">Send</button>
                </form>
            </main>
        </div>
        <!-- New Conversation Modal -->
        <div id="new-conv-modal" class="modal" style="display:none;">
            <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="new-conv-title" style="max-width:480px;padding:16px;background:#0f1720;color:#fff;border-radius:8px;position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);z-index:10000;">
                <h3 id="new-conv-title">New Conversation</h3>
                <label>
                    <div>Title (optional)</div>
                    <input id="nc-title" type="text" placeholder="Conversation title" style="width:100%;padding:8px;margin:6px 0;">
                </label>
                <label>
                    <input id="nc-is-group" type="checkbox"> Group Conversation
                </label>
                <div style="margin-top:8px;">
                    <div>Add participants</div>
                    <input id="nc-search" type="search" placeholder="Search users by name" style="width:100%;padding:8px;margin:6px 0;">
                    <ul id="nc-results" style="list-style:none;padding:0;margin:0 0 8px 0;max-height:160px;overflow:auto;"></ul>
                    <div id="nc-selected" style="display:flex;gap:6px;flex-wrap:wrap;"></div>
                </div>
                <div style="margin-top:12px;text-align:right;">
                    <button id="nc-cancel" style="margin-right:8px;padding:8px 12px;">Cancel</button>
                    <button id="nc-create" style="padding:8px 12px;background:#5b21b6;color:#fff;border:none;border-radius:4px;">Create</button>
                </div>
            </div>
            <div class="modal-backdrop" style="position:fixed;inset:0;background:rgba(0,0,0,0.5)"></div>
        </div>
    </body>
</html>